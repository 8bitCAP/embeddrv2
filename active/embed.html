<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Embed</title>
    <script src="/active/uv/uv.bundle.js"></script>
    <script src="/active/uv/uv.config.js"></script>
    <script src="/active/uv/uv.sw.js"></script>
    <script src="/active/uv/uv.client.js"></script>
    <script src="/active/uv/uv.handler.js"></script>
</head>
<body>

    <h1>Test</h1>>
    <ifame id="encodedIframe" width="600" height="400"></iframe>

    <script type="module">
        import * as Ultraviolet from "/active/uv/uv.bundle.js";
        // Example URL for now
        let originalUrl = "https://rhw.one";
        let encodedUrl = Ultraviolet.codec.xor.encode(originalUrl);
        let encodedUrlWithPrefix = `${self.__uv$config.prefix}${encodedUrl}`;
        console.log("Encoded URL:", encodedUrlWithPrefix);
        document.getElementById("encodedIframe").src = encodedUrlWithPrefix;

// for background processing
        try {
            await registerSW();
            console.log("Service Worker registered successfully.");
        } catch (err) {
            console.error("Failed to register service worker:", err);
        }
    </script>

</body>
</html>
