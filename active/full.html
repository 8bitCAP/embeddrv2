<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fullscreen Proxy</title>
    <link rel="stylesheet" href="style/global.css" />
    <link rel="stylesheet" href="style/browser.css" />
    <script src="uv/uv.bundle.js" defer></script>
    <script src="uv/uv.config.js" defer></script>
    <style>
      html, body {
        height: 100%;
        width: 100%;
        margin: 0;
        padding: 0;
        overflow: hidden;
      }
      #url-bar {
        width: 100%;
        box-sizing: border-box;
        padding: 10px;
        font-size: 1.2em;
        border: none;
        border-bottom: 1px solid #ccc;
        outline: none;
      }
      #proxy-frame {
        width: 100vw;
        height: calc(100vh - 48px); /* Adjust if you change the url-bar height */
        border: none;
        display: block;
      }
      body, html {
        background: #181818;
        color: #fff;
      }
    </style>
  </head>
  <body>
    <input id="url-bar" type="text" placeholder="Enter URL and press Enterâ€¦" autocomplete="off" />
    <iframe id="proxy-frame"></iframe>
    <script>
      // Parse ?url part, fallback to first query param if no url=
      function getTargetUrl() {
        const q = window.location.search.slice(1);
        if (!q) return "";
        if (q.startsWith("http")) return q;
        const params = new URLSearchParams(window.location.search);
        return params.get("url") || "";
      }

      function go(url) {
        if (!url.startsWith("http")) url = "https://" + url;
        document.getElementById('proxy-frame').src = __uv$config.prefix + __uv$config.encodeUrl(url);
        document.getElementById('url-bar').value = url;
      }

      // On input enter, navigate
      document.getElementById('url-bar').addEventListener('keydown', function(e) {
        if (e.key === 'Enter') go(this.value);
      });

      // On load, use query param if present
      window.addEventListener('DOMContentLoaded', function() {
        const url = getTargetUrl();
        if (url) go(url);
      });
    </script>
  </body>
</html>
